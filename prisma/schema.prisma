generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Settings {
    userId   String @id @unique
    language String
}

model Profiles {
    userId      String    @id @unique
    email       String
    provider    String?
    createdAt   DateTime  @default(now())
    processedAt DateTime?
}

model Projects {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    userId      String
    name        String
    description String?

    @@unique([userId, name])
}

model Leads {
    id           String    @id @default(uuid())
    createdAt    DateTime  @default(now())
    updatedAt    DateTime  @updatedAt
    email        String
    projectId    String
    firstname    String?
    lastname     String?
    organization String?
    description  String?
    activity     String?
    phone        String?
    processedAt  DateTime?
    metadata     Json?

    @@unique([projectId, email])
}

model Scenarios {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    projectId String
    name      String

    @@unique([projectId, name])
}

model ScenariosEvents {
    id          String   @id @default(uuid())
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    scenarioId  String
    name        String
    description String?
    type        String
    data        Json

    @@unique([scenarioId, name])
}

model Sources {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
    name      String

    @@unique([name])
}

model ScenariosSources {
    id         String   @id @default(uuid())
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt
    scenarioId String
    sourceId   String

    @@unique([scenarioId, sourceId])
}
